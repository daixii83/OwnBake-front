(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"4e3f":function(t,e,s){"use strict";s("d1dd")},ad40:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"max-width":"1000px",width:"100%"},attrs:{align:"center"}},[s("q-dialog",{model:{value:t.displayEvent,callback:function(e){t.displayEvent=e},expression:"displayEvent"}},[s("div",[t.event?s("q-card",{staticStyle:{"max-width":"300px"}},[s("q-toolbar",{staticClass:"bg-primary",staticStyle:{"min-width":"300px"}},[s("q-toolbar-title",{staticClass:"text-accent"},[t._v("\n            預約資訊\n          ")]),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",color:"accent",icon:"close"}})],1),s("q-card-section",{staticClass:"inset-shadow bg-accent q-pt-md pt-mobile"},[s("div",{staticClass:"row justify-center"},[s("div",{staticClass:"col-5"},[s("div",{staticClass:"row",attrs:{align:"right"}},[s("div",{staticClass:"col-12"},[t._v("預約人：")]),s("div",{staticClass:"col-12"},[t._v("預約日期：")]),s("div",{staticClass:"col-12"},[t._v("預約時間：")]),s("div",{staticClass:"col-12"},[t._v("大人人數：")]),s("div",{staticClass:"col-12"},[t._v("小孩人數：")])])]),s("div",{staticClass:"col-1"}),s("div",{staticClass:"col-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[t._v(" "+t._s(t.event.reservation.name)+" ")]),s("div",{staticClass:"col-12"},[t._v(" "+t._s(t.event.reservation.date)+" ")]),s("div",{staticClass:"col-12"},[t._v(" "+t._s(t.event.reservation.time)+" ")]),s("div",{staticClass:"col-12"},[t._v(" "+t._s(t.event.reservation.adultNum)+" ")]),s("div",{staticClass:"col-12"},[t._v(" "+t._s(t.event.reservation.childNum)+" ")])])])])]),s("q-card-actions",{staticClass:"bg-accent q-pb-md pb-mobile",attrs:{align:"center"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"取消預約",color:"primary"}})],1)],1):t._e()],1)]),s("q-toolbar",{staticClass:"text-dark text-h5 row justify-between items-center"},[s("div",{staticClass:"col-4",staticStyle:{"text-align":"center"}},[t._v("\n    "+t._s(t.title)+"\n    ")]),s("q-btn-group",{staticClass:"col-3",attrs:{flat:""}},[s("q-btn",{attrs:{color:"primary",flat:"",label:"Prev"},on:{click:t.onPrev}}),s("q-btn",{attrs:{color:"primary",flat:"",label:"Next"},on:{click:t.onNext}})],1)],1),s("q-separator",{staticClass:"full-width"}),s("q-separator"),s("q-calendar",{ref:"calendar",attrs:{view:"month",locale:"zh-TW",now:t.now,animated:"","transition-prev":"slide-right","transition-next":"slide-left","day-height":100,"short-weekday-label":t.shortWeekdayLabel,"short-month-label":t.shortMonthLabel,data:t.events},on:{change:t.onChange},scopedSlots:t._u([{key:"day",fn:function(e){var a=e.timestamp;return[t._l(t.getEvents(a.date),(function(e,a){return[s("q-badge",{key:a,class:t.badgeClasses(e,"day"),staticStyle:{width:"100%",cursor:"pointer",height:"16px","max-height":"16px"},style:t.badgeStyles(e,"day"),on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.showEvent(e)}}},[t._v("\n          "+t._s(e.reservation.time)+"\n          "),s("span",{staticClass:"ellipsis"},[t._v(t._s(e.title))])])]}))]}}]),model:{value:t.selectedDate,callback:function(e){t.selectedDate=e},expression:"selectedDate"}})],1)},i=[],r=(s("d9e2"),s("5319"),s("fe7a")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[s("q-card",{staticClass:"my-card"},[s("q-card-section",{attrs:{align:"center"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 q-pr-md",attrs:{align:"end"}},[t._v("預約日期：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v(t._s(t.event.date))])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 q-pr-md",attrs:{align:"end"}},[t._v("預約時間：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v(t._s(t.event.time))])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6  q-pr-md",attrs:{align:"end"}},[t._v("預約人數：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v("大人 "+t._s(t.event.adultNum)+" 人  小孩 "+t._s(t.event.childNum)+" 人")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 q-pr-md",attrs:{align:"end"}},[t._v("預約人姓名：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v(" "+t._s(t.event.name)+" ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 q-pr-md",attrs:{align:"end"}},[t._v("手機號碼：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v(" "+t._s(t.event.phone)+" ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 q-pr-md",attrs:{align:"end"}},[t._v("email：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v(" "+t._s(t.event.email)+" ")])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 q-pr-md q-pb-md",attrs:{align:"end"}},[t._v("備註：")]),s("div",{staticClass:"col-6",attrs:{align:"start"}},[t._v(t._s(t.event.remark))])]),s("div",{staticClass:"row q-pt-md"},[s("div",{staticClass:"col-12",attrs:{align:"center"}},[s("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"}},[t._v("取消預約")])],1)])])],1)],1)},o=[],l={props:{reservationInfo:{type:Object}},data(){return{event:{}}},methods:{onRejected(t){this.$q.notify({type:"negative",message:`${t.length} file(s) did not pass validation constraints`})},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")}},computed:{},async created(){this.event=this.reservationInfo}},c=l,d=s("2877"),v=s("24e8"),h=s("f09f"),p=s("a370"),g=s("9c40"),m=s("eebe"),u=s.n(m),C=Object(d["a"])(c,n,o,!1,null,"53f9469d",null),b=C.exports;u()(C,"components",{QDialog:v["a"],QCard:h["a"],QCardSection:p["a"],QBtn:g["a"]});const f=/^\s*rgb(a)?\s*\((\s*(\d+)\s*,\s*?){2}(\d+)\s*,?\s*([01]?\.?\d*?)?\s*\)\s*$/;function w(t){if("string"!==typeof t)throw new TypeError("Expected a string");const e=f.exec(t);if(e){const t={r:Math.min(255,parseInt(e[2],10)),g:Math.min(255,parseInt(e[3],10)),b:Math.min(255,parseInt(e[4],10))};return e[1]&&(t.a=Math.min(1,parseFloat(e[5]))),t}return _(t)}function _(t){if("string"!==typeof t)throw new TypeError("Expected a string");t=t.replace(/^#/,""),3===t.length?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:4===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return t.length>6?{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:Math.round((255&e)/2.55)}:{r:e>>16,g:e>>8&255,b:255&e}}function y(t){if("string"!==typeof t&&(!t||void 0===t.r))throw new TypeError("Expected a string or a {r, g, b} object as color");const e="string"===typeof t?w(t):t,s=e.r/255,a=e.g/255,i=e.b/255,r=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4),n=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),o=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4);return.2126*r+.7152*n+.0722*o}var q={data(){return{selectedDate:"",now:"",title:"",shortWeekdayLabel:!1,shortMonthLabel:!1,dateFormatter:void 0,start:void 0,events:[],event:null,displayEvent:!1}},beforeMount(){this.updateFormatter()},watch:{locale(){this.updateFormatter(),this.updateTitle()}},methods:{onChange({start:t}){this.start=t,this.updateTitle()},onPrev(){this.$refs.calendar.prev()},onNext(){this.$refs.calendar.next()},updateTitle(){const t=r["a"].makeDate(this.start);void 0!==this.dateFormatter&&(this.title=this.dateFormatter.format(t))},updateFormatter(){try{this.dateFormatter=new Intl.DateTimeFormat(this.locale||void 0,{month:this.shortMonthLabel?"short":"long",year:"numeric",timeZone:"UTC"})}catch(t){this.dateFormatter=void 0}},isCssColor(t){return!!t&&!!t.match(/^(#|(rgb|hsl)a?\()/)},badgeClasses(t,e){const s=this.isCssColor(t.bgcolor),a="header"===e;return{[`text-white bg-${t.bgcolor}`]:!s,"full-width":!a&&(!t.side||"full"===t.side),"left-side":!a&&"left"===t.side,"right-side":!a&&"right"===t.side}},badgeStyles(t,e,s,a){const i={};return this.isCssColor(t.bgcolor)&&(i["background-color"]=t.bgcolor,i.color=y(t.bgcolor)>.5?"black":"white"),s&&(i.top=s(t.time)+"px"),a&&(i.height=a(t.duration)+"px"),i["align-items"]="flex-start",i},getEvents(t){const e=r["a"].parseTimestamp(t),s=[];for(let a=0;a<this.events.length;++a){let i=!1;if(this.events[a].reservation.date===t){if(this.events[a].reservation.time&&s.length>0){const t=r["a"].parseTimestamp(this.events[a].reservation.date+" "+this.events[a].reservation.time),e=r["a"].addToDate(t,{minute:this.events[a].reservation.duration});for(let n=0;n<s.length;++n)if(s[n].time){const o=r["a"].parseTimestamp(s[n].reservation.date+" "+s[n].reservation.time),l=r["a"].addToDate(o,{minute:s[n].reservation.duration});if(r["a"].isBetweenDates(t,o,l)||r["a"].isBetweenDates(e,o,l)){s[n].side="left",this.events[a].side="right",s.push(this.events[a]),i=!0;break}}}i||(this.events[a].side=void 0,s.push(this.events[a]))}else if(this.events[a].days){const t=r["a"].parseTimestamp(this.events[a].reservation.date),n=r["a"].addToDate(t,{day:this.events[a].days});r["a"].isBetweenDates(e,t,n)&&(s.push(this.events[a]),i=!0)}}return s},showEvent(t){this.event=t,this.displayEvent=!0},reservationInfo(t,e){this.event={...this.event[e]},console.log(this.reservation),this.$q.dialog({title:"",component:b,parent:this,reservationInfo:this.event}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))}},async created(){try{const{data:t}=await this.api.get("/reservations/me",{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.events=t.result}catch(t){console.log(t),this.$q.dialog({parent:this,title:"錯誤",message:"取得預約失敗"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},x=q,k=(s("4e3f"),s("65c6")),D=s("6ac5"),T=s("4b7e"),E=s("e7a9"),Q=s("eb85"),$=s("58a81"),M=s("7f67"),S=Object(d["a"])(x,a,i,!1,null,"70d54d4b",null);e["default"]=S.exports;u()(S,"components",{QDialog:v["a"],QCard:h["a"],QToolbar:k["a"],QToolbarTitle:D["a"],QBtn:g["a"],QCardSection:p["a"],QCardActions:T["a"],QBtnGroup:E["a"],QSeparator:Q["a"],QBadge:$["a"]}),u()(S,"directives",{ClosePopup:M["a"]})},d1dd:function(t,e,s){}}]);