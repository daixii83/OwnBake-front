(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"8af9":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"q-pa-xl bg-white"},[s("q-table",{ref:"table",attrs:{title:"訂單總表",data:e.orders,columns:e.columns,"row-key":"name"},scopedSlots:e._u([{key:"body",fn:function(t){return[s("q-tr",{attrs:{props:t}},[s("q-td",{key:"orderId",attrs:{props:t}},[e._v(e._s(t.row._id))]),s("q-td",{key:"orderDate",attrs:{props:t}},[e._v(e._s(t.row.date))]),s("q-td",{key:"orderInfo",attrs:{props:t}},[s("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"},on:{click:function(s){return e.orderInfo(t.pageIndex)}}},[e._v("查看詳細")])],1),s("q-td",{key:"orderStatus",attrs:{props:t}},[!1===t.row.orderStatus?s("div",[e._v(" 待處理 ")]):e._e(),!0===t.row.orderStatus?s("div",[e._v(" 已完成 ")]):e._e(),!0===t.row.cancelStatus?s("div",[e._v(" 已取消 ")]):e._e()]),s("q-td",{key:"orderRecipient",attrs:{props:t}},[e._v(e._s(t.row.order.recipient))]),s("q-td",{key:"editOrDelete"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 q-gutter-md",attrs:{align:"center"}},[s("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"},on:{click:function(s){return e.completedOrder(t.pageIndex)}}},[e._v("完成訂單")]),s("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"},on:{click:function(s){return e.deleteOrders(t.row._id)}}},[e._v("刪除訂單")])],1)])])],1)]}}])})],1)},a=[],i=s("fbc9");const o=[{name:"orderId",required:!0,label:"訂單編號",align:"left",field:e=>e.orderId,format:e=>`${e}`},{name:"orderDate",align:"left",label:"訂購日期",field:"orderDate"},{name:"orderInfo",align:"center",label:"訂單詳細",field:"orderInfo"},{name:"orderStatus",align:"center",label:"訂單狀態",field:"orderStatus"},{name:"orderRecipient",align:"center",label:"訂購人",field:"orderRecipient"},{name:"editOrDelete",align:"center",label:"操作",field:"editOrDelete"}];var n={data(){return{columns:o,orders:[]}},methods:{orderInfo(e){this.order={...this.orders[e]},console.log(this.order),this.$q.dialog({title:"",component:i["a"],parent:this,orderInfo:this.order}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},async completedOrders(e,t){console.log(e);const s={orderStatus:!0};try{await this.api.patch("/Orders/"+e,s,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}}),this.$q.dialog({parent:this,title:"成功",message:"完成訂單成功"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}catch(r){console.log(r),this.$q.dialog({parent:this,title:"完成訂單失敗",message:r.response.data.message}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}},async cancelOrders(e){console.log(e);try{await this.api.patch("/Orders/"+e,{cancelStatus:!0},{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}}),this.$q.dialog({parent:this,title:"成功",message:"取消訂單成功"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}catch(t){console.log(t),this.$q.dialog({parent:this,title:"取消失敗",message:t.response.data.message}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}},async deleteOrders(e){console.log(e);try{await this.api.delete("/Orders/"+e,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}}),this.$q.dialog({parent:this,title:"成功",message:"刪除成功"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}catch(t){console.log(t),this.$q.dialog({parent:this,title:"失敗",message:t.response.data.message}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},async created(){try{const{data:e}=await this.api.get("/orders/all",{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.orders=e.result}catch(e){console.log(e),this.$q.dialog({parent:this,title:"錯誤",message:"取得訂單失敗"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},d=n,l=s("2877"),c=s("eaac"),v=s("bd08"),p=s("db86"),g=s("9c40"),h=s("eebe"),m=s.n(h),u=Object(l["a"])(d,r,a,!1,null,"0dfa8435",null);t["default"]=u.exports;m()(u,"components",{QTable:c["a"],QTr:v["a"],QTd:p["a"],QBtn:g["a"]})},fbc9:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-dialog",{ref:"dialog",on:{hide:e.onDialogHide}},[s("q-card",{staticClass:"q-dialog-plugin bg-accent q-pa-md",staticStyle:{"max-width":"1500px","max-height":"1000px",width:"1000px",height:"650px"}},[s("div",{staticClass:"row q-pa-md bg-dark text-white"},[s("div",{staticClass:"col-4"},[e._v("訂單號碼： "+e._s(e.orders._id))]),s("div",{staticClass:"col-4"},[e._v("訂購日期： "+e._s(e.orders.date))]),s("div",{staticClass:"col-4"},[e._v("\n        訂單狀態："),!0===e.orders.order.orderStatus?s("div",{staticClass:"div"},[e._v("已完成")]):e._e(),!1===e.orders.order.orderStatus?s("div",{staticClass:"div"},[e._v("待出貨")]):e._e()])]),s("div",{staticClass:"row bg-primary text-white q-py-md"},[s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v("商品圖片")]),s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v("商品名稱")]),s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v("數量")]),s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v("價格")])]),e._l(e.orders.products,(function(t){return s("div",{key:t.id,staticClass:"row items-center q-pa-md bg-white"},[s("div",{staticClass:"col-3",attrs:{align:"center"}},[s("img",{staticClass:"text-center",staticStyle:{width:"100px","max-height":"100px"},attrs:{src:t.product.productImage}})]),s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v(e._s(t.product.productName))]),s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v(e._s(t.quantity))]),s("div",{staticClass:"col-3",attrs:{align:"center"}},[e._v(e._s(t.product.productPrice))])])})),s("div",{staticClass:"row q-pa-md bg-primary text-white"},[s("div",{staticClass:"col-12"},[e._v("\n        寄送方式："+e._s(e.orders.order.delivery)+"\n      ")])]),s("div",{staticClass:"row q-pa-md bg-white"},[s("div",{staticClass:"col-2"},[s("div",[e._v("\n          寄件人姓名：\n        ")]),s("div",[e._v("\n          手機號碼：\n        ")]),s("div",[e._v("\n          email：\n        ")]),s("div",[e._v("\n          寄送地址：\n        ")]),s("div",[e._v("\n          備註：\n        ")])]),s("div",{staticClass:"col-10 text-dark"},[s("div",[e._v("\n          "+e._s(e.orders.order.recipient)+"\n        ")]),s("div",[e._v("\n          "+e._s(e.orders.order.mobile)+"\n        ")]),s("div",[e._v("\n          "+e._s(e.orders.order.mobile)+"\n        ")]),s("div",[e._v("\n          "+e._s(e.orders.order.address)+"\n        ")]),s("div",[e._v("\n          "+e._s(e.orders.order.remark)+"\n        ")])])]),s("div",{staticClass:"row q-pa-md bg-primary text-white"},[s("div",{staticClass:"col-6"},[e._v("\n        付款方式："+e._s(e.orders.order.pay)+"\n      ")]),s("div",{staticClass:"col-6"},[e._v("\n        發票寄送方式："+e._s(e.orders.order.receiptCarrier)+"\n      ")])]),s("div",{staticClass:"row q-pa-md text-dark bg-white"},[s("div",{staticClass:"col-6"}),"手機條碼"===e.orders.order.receiptCarrier?s("div",{staticClass:"col-6"},[e._v("\n        手機條碼："+e._s(e.orders.order.code)+"\n      ")]):e._e()]),s("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"center"}},[s("q-btn",{attrs:{color:"primary",label:"關閉"},on:{click:e.hide}})],1)],2)],1)},a=[],i={props:{orderInfo:{type:Object}},data(){return{orders:{}}},methods:{onRejected(e){this.$q.notify({type:"negative",message:`${e.length} file(s) did not pass validation constraints`})},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")}},computed:{},async created(){this.orders=this.orderInfo}},o=i,n=s("2877"),d=s("24e8"),l=s("f09f"),c=s("4b7e"),v=s("9c40"),p=s("eebe"),g=s.n(p),h=Object(n["a"])(o,r,a,!1,null,"95e34242",null);t["a"]=h.exports;g()(h,"components",{QDialog:d["a"],QCard:l["a"],QCardActions:c["a"],QBtn:v["a"]})}}]);