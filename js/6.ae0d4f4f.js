(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"22a3":function(t,e,i){},"921a":function(t,e,i){"use strict";i("22a3")},cced:function(t,e,i){},d12f:function(t,e,i){"use strict";i("cced")},da5e:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"q-px-md bg-white"},[i("div",{staticClass:"q-pa-xl bg-white"},[i("div",{staticClass:"q-py-md bg-white"},[i("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.8rem"},on:{click:t.createProduct}},[t._v("新增商品")])],1),i("q-table",{ref:"table",attrs:{title:"商品管理",data:t.products,columns:t.columns,"row-key":"name","binary-state-sort":""},scopedSlots:t._u([{key:"body",fn:function(e){return[i("q-tr",{attrs:{props:e}},[i("q-td",{key:"productCategories",attrs:{props:e}},[t._v(t._s(e.row.productCategories))]),i("q-td",{key:"productName",attrs:{props:e}},[t._v(t._s(e.row.productName))]),i("q-td",{key:"productImage",attrs:{props:e}},[i("img",{staticClass:"text-center",staticStyle:{width:"100px","max-height":"100px"},attrs:{src:e.row.productImage}})]),i("q-td",{key:"productPrice",attrs:{props:e}},[t._v(t._s(e.row.productPrice))]),i("q-td",{key:"productSell",attrs:{props:e}},[t._v("\n            "+t._s(e.row.productSell)+"\n            ")]),i("q-td",{key:"productDescription",attrs:{props:e}},[t._v(t._s(e.row.productDescription))]),i("q-td",{key:"quantitySold",attrs:{props:e}},[t._v(t._s(e.row.quantitySold))]),i("q-td",{key:"editOrDelete"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-6"},[i("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"},on:{click:function(i){return t.editProduct(e.pageIndex)}}},[t._v("編輯商品")])],1),i("div",{staticClass:"col-6"},[i("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"},on:{click:t.deleteProduct}},[t._v("刪除商品")])],1)])])],1)]}}])})],1)])},s=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[i("q-card",{staticClass:"q-dialog-plugin bg-accent",staticStyle:{"max-width":"1500px","max-height":"1000px",width:"1000px",height:"650px"}},[i("q-card-section",[t.form._id.length<=0?i("div",{staticClass:"q-py-md text-h5",attrs:{align:"center"}},[t._v("\n      新增商品\n      ")]):t._e(),t.form._id.length>0?i("div",{staticClass:"text-h5",attrs:{align:"center"}},[t._v("\n      編輯商品\n      ")]):t._e(),i("div",{staticClass:"q-px-xl q-py-xl bg-white"},[i("div",{staticClass:"row items-center"},[i("div",{staticClass:"col-md-6",attrs:{align:"center"}},[i("img-inputer",{attrs:{accept:"image/*",theme:"light",size:"large",bottomText:"點擊或拖曳圖片","hover-text":"點擊或拖曳圖片以修改",placeholder:"點擊或拖曳選擇圖片","max-size":1024,"exceed-size-text":"檔案大小不能超過"},model:{value:t.form.productImage,callback:function(e){t.$set(t.form,"productImage",e)},expression:"form.productImage"}})],1),i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"row items-center"},[i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-5"},[t._v("請選擇種類")]),i("div",{staticClass:"col-6 q-pt-md"},[i("q-select",{attrs:{rounded:"",outlined:"",options:t.options,rules:[function(t){return t.length>1||"請選擇商品分類"}],state:t.state.productCategories},model:{value:t.form.productCategories,callback:function(e){t.$set(t.form,"productCategories",e)},expression:"form.productCategories"}})],1)]),i("div",{staticClass:"row items-center"},[i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-5"},[t._v("商品名稱")]),i("div",{staticClass:"col-6 q-pt-md"},[i("q-input",{attrs:{outlined:"","lazy-rules":"",rules:[function(t){return null!==t&&""!==t||"請輸入商品名稱"}],state:t.state.productName},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName",e)},expression:"form.productName"}})],1)]),i("div",{staticClass:"row items-center"},[i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-5"},[t._v("商品價格")]),i("div",{staticClass:"col-6 q-pt-md"},[i("q-input",{attrs:{outlined:"",rules:[function(t){return null!==t&&""!==t||"請輸入價格"},function(t){return t>0||"請輸入大於0的價格"}],state:t.state.productPrice},model:{value:t.form.productPrice,callback:function(e){t.$set(t.form,"productPrice",t._n(e))},expression:"form.productPrice"}})],1)]),i("div",{staticClass:"row items-center q-pt-md"},[i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-5"},[t._v("上架狀態")]),i("div",{staticClass:"col-6"},[i("q-radio",{attrs:{"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:!0,label:"上架中"},model:{value:t.form.productSell,callback:function(e){t.$set(t.form,"productSell",e)},expression:"form.productSell"}}),i("q-radio",{attrs:{"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:!1,label:"未上架"},model:{value:t.form.productSell,callback:function(e){t.$set(t.form,"productSell",e)},expression:"form.productSell"}})],1)])])]),i("div",{staticClass:"row q-py-md"},[i("div",{staticClass:"col-12 q-py-md text-h6"},[t._v("商品說明")]),i("div",{staticClass:"col-12"},[i("q-editor",{attrs:{dense:t.$q.screen.lt.md,toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:t.$q.lang.editor.defaultFont,icon:t.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:t.form.productDescription,callback:function(e){t.$set(t.form,"productDescription",e)},expression:"form.productDescription"}})],1)])])]),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{color:"primary",label:"送出",disabled:t.formSubmitting},on:{click:t.submitForm}}),i("q-btn",{attrs:{color:"primary",label:"取消",disabled:t.formSubmitting},on:{click:t.resetForm}})],1)],1)],1)},a=[],c={props:{product:{type:Object,default(){return{productCategories:"",productName:"",productImage:null,productPrice:"",productSell:!1,productDescription:"",_id:"",index:-1}}}},data(){return{form:{productCategories:"",productName:"",productImage:null,productPrice:"",productSell:!1,productDescription:"",_id:"",index:-1},products:[],formSubmitting:!1,options:["蛋糕","餅乾","塔&派","點心","烘焙用具"],sellStatus:["上架中","未上架"]}},methods:{onRejected(t){this.$q.notify({type:"negative",message:`${t.length} file(s) did not pass validation constraints`})},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")},async submitForm(t){if(t.preventDefault(),!this.state.productName||!this.state.productPrice||!this.state.productCategories)return void this.$q.dialog({parent:this,title:"錯誤",message:"缺少必填欄位"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}));this.formSubmitting=!0;const e=new FormData;for(const o in this.form)"_id"!==o&&e.append(o,this.form[o]);try{if(0===this.form._id.length){const{data:t}=await this.api.post("/products",e,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.products.push(t.result)}else{const{data:t}=await this.api.patch("/products/"+this.form._id,e,{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.products[this.form.index]={...this.form,image:t.result.image}}this.hide()}catch(i){console.log(i),this.$q.dialog({parent:this,title:"失敗",message:i.response.data.message}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}this.formSubmitting=!1,this.$emit("ok")},resetForm(t){this.formSubmitting?t.preventDefault():(this.form={productImage:null,productCategories:"",productSell:!1,productName:"",productPrice:null,productDescription:"",_id:"",index:-1},this.hide())}},computed:{state(){return{productName:0!==this.form.productName.length||null,productPrice:null===this.form.productPrice?null:this.form.productPrice>=0,productCategories:0!==this.form.productCategories.length||null}}},async created(){this.form=this.product}},l=c,n=(i("921a"),i("2877")),d=i("24e8"),u=i("f09f"),p=i("a370"),m=i("ddd8"),h=i("27f9"),f=i("3786"),g=i("d66b"),b=i("4b7e"),v=i("9c40"),C=i("eebe"),q=i.n(C),_=Object(n["a"])(l,r,a,!1,null,"60f357b2",null),k=_.exports;q()(_,"components",{QDialog:d["a"],QCard:u["a"],QCardSection:p["a"],QSelect:m["a"],QInput:h["a"],QRadio:f["a"],QEditor:g["a"],QCardActions:b["a"],QBtn:v["a"]});const w=[{name:"productCategories",required:!0,label:"商品種類",align:"left",field:t=>t.productCategories,format:t=>`${t}`,sortable:!0},{name:"productName",align:"left",label:"商品名稱",field:"productName",sortable:!0},{name:"productImage",align:"center",label:"商品圖片",field:"productImage",style:"width: 10px"},{name:"productPrice",align:"center",label:"價格",field:"productPrice"},{name:"productSell",align:"center",label:"上架狀態",field:"productSell"},{name:"productDescription",align:"center",label:"商品說明",field:"productDescription"},{name:"quantitySold",align:"center",label:"售出總數",field:"quantitySold"},{name:"editOrDelete",align:"center",label:"操作",field:"editOrDelete"}];var x={data(){return{columns:w,products:[]}},methods:{createProduct(){this.$q.dialog({title:"",component:k,parent:this}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},editProduct(t){this.form={...this.products[t],image:null,index:t},this.$q.dialog({title:"",component:k,parent:this,product:this.form}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))},deleteProduct(t){this.products.splice(t,1)}},async created(){try{const{data:t}=await this.api.get("/products/all",{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.products=t.result}catch(t){this.$q.dialog({parent:this,title:"失敗",message:"取得商品失敗"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},y=x,S=(i("d12f"),i("eaac")),$=i("bd08"),D=i("db86"),P=Object(n["a"])(y,o,s,!1,null,"39a03805",null);e["default"]=P.exports;q()(P,"components",{QBtn:v["a"],QTable:S["a"],QTr:$["a"],QTd:D["a"]})}}]);