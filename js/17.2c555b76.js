(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"8af9":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"q-pa-xl bg-white"},[r("q-table",{ref:"table",attrs:{title:"我的訂單",data:t.orders,columns:t.columns,"row-key":"name"},scopedSlots:t._u([{key:"body",fn:function(e){return[r("q-tr",{attrs:{props:e}},[r("q-td",{key:"orderId",attrs:{props:e}},[t._v(t._s(e.row._id))]),r("q-td",{key:"orderDate",attrs:{props:e}},[t._v(t._s(e.row.date))]),r("q-td",{key:"orderInfo",attrs:{props:e}},[r("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"},on:{click:function(r){return t.orderInfo(e.pageIndex)}}},[t._v("查看詳細")])],1),r("q-td",{key:"orderStatus",attrs:{props:e}},[!1===e.row.order.orderStatus?r("div",[t._v(" 待處理 ")]):t._e(),!0===e.row.order.orderStatus?r("div",[t._v(" 已完成 ")]):t._e()]),r("q-td",{key:"orderPrice",attrs:{props:e}},[t._v(t._s(t.total))]),r("q-td",{key:"productDescription",attrs:{props:e}},[t._v(t._s(e.row.productDescription))]),r("q-td",{key:"quantitySold",attrs:{props:e}},[t._v(t._s(e.row.quantitySold))]),r("q-td",{key:"editOrDelete"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 q-gutter-md",attrs:{align:"center"}},[r("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"}},[t._v("完成訂單")]),r("q-btn",{staticClass:"bg-white bubble",attrs:{size:"0.7rem"}},[t._v("刪除訂單")])],1)])])],1)]}}])})],1)},o=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[r("q-card",{staticClass:"q-dialog-plugin bg-accent",staticStyle:{"max-width":"1500px","max-height":"1000px",width:"1000px",height:"650px"}},[r("q-card-section",[r("q-table",{ref:"table",staticStyle:{width:"100%","max-width":"1500px"},attrs:{title:"訂單詳細",data:t.order,columns:t.columns1,"row-key":"name","binary-state-sort":"",flat:""},scopedSlots:t._u([{key:"body",fn:function(e){return[r("q-tr",{attrs:{props:e}},[r("q-td",{key:"productCategories",attrs:{props:e}},[t._v(t._s(t.order._id))]),r("q-td",{key:"productName",attrs:{props:e}},[t._v(t._s(e.row.product.productName))]),r("q-td",{key:"productImage",attrs:{props:e}},[r("img",{staticClass:"text-center",staticStyle:{width:"100px","max-height":"100px"},attrs:{src:e.row.product.productImage}})]),r("q-td",{key:"productPrice",attrs:{props:e}},[t._v(t._s(e.row.product.productPrice))]),r("q-td",{key:"quantity",attrs:{props:e}},[t._v(t._s(e.row.quantity))]),r("q-td",{key:"subtotal",attrs:{props:e}},[t._v(t._s(t.total))])],1)]}}])})],1),r("q-card-actions",{attrs:{align:"right"}},[r("q-btn",{attrs:{color:"primary",label:"關閉"},on:{click:t.hide}})],1)],1)],1)},i=[];const d=[{name:"productCategories",required:!0,label:"商品種類",align:"left",field:t=>t.product.productCategories,format:t=>`${t}`,sortable:!0},{name:"productName",align:"left",label:"商品名稱",field:"product.productName"},{name:"productImage",align:"center",label:"商品圖片",field:"product.productImage"},{name:"productPrice",align:"center",label:"價格",field:"product.productPrice"},{name:"quantity",align:"center",label:"數量",field:"quantity"},{name:"subtotal",align:"center",label:"小計",field:"subtotal"}];var l={data(){return{columns1:d,orders:[]}},methods:{onRejected(t){this.$q.notify({type:"negative",message:`${t.length} file(s) did not pass validation constraints`})},show(){this.$refs.dialog.show()},hide(){this.$refs.dialog.hide()},onDialogHide(){this.$emit("hide")}},computed:{},async created(){this.order=this.orders}},n=l,c=r("2877"),p=r("24e8"),u=r("f09f"),g=r("a370"),m=r("eaac"),b=r("bd08"),h=r("db86"),f=r("4b7e"),q=r("9c40"),y=r("eebe"),_=r.n(y),w=Object(c["a"])(n,s,i,!1,null,"685f812a",null),v=w.exports;_()(w,"components",{QDialog:p["a"],QCard:u["a"],QCardSection:g["a"],QTable:m["a"],QTr:b["a"],QTd:h["a"],QCardActions:f["a"],QBtn:q["a"]});const k=[{name:"orderId",required:!0,label:"訂單編號",align:"left",field:t=>t.orderId,format:t=>`${t}`},{name:"orderDate",align:"left",label:"訂購日期",field:"orderDate"},{name:"orderInfo",align:"center",label:"訂單詳細",field:"orderInfo"},{name:"orderStatus",align:"center",label:"訂單狀態",field:"orderStatus"},{name:"editOrDelete",align:"center",label:"操作",field:"editOrDelete"}];var C={data(){return{columns:k,orders:[]}},methods:{orderInfo(t){this.order={...this.orders[t],index:t},console.log(this.order),this.$q.dialog({title:"",component:v,parent:this,orderInfo:this.order}).onOk((()=>{console.log("OK")})).onCancel((()=>{console.log("Cancel")})).onDismiss((()=>{console.log("Called on OK or Cancel")}))}},async created(){try{const{data:t}=await this.api.get("/orders/all",{headers:{authorization:"Bearer "+this.$store.getters["user/user"].token}});this.orders=t.result}catch(t){console.log(t),this.$q.dialog({parent:this,title:"錯誤",message:"取得訂單失敗"}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}}},x=C,I=Object(c["a"])(x,a,o,!1,null,"4c6c5760",null);e["default"]=I.exports;_()(I,"components",{QTable:m["a"],QTr:b["a"],QTd:h["a"],QBtn:q["a"]})}}]);